<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: thor.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: thor.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>/**
* @copyright Copyright (C) 2013  Renie Siqueira da Silva &lt;br />&lt;br />
* 
* This program is free software: you can redistribute it and/or modify&lt;br />
* it under the terms of the GNU Affero General Public License as&lt;br />
* published by the Free Software Foundation, either version 3 of the&lt;br />
* License, or (at your option) any later version.&lt;br />&lt;br />
* 
* This program is distributed in the hope that it will be useful,&lt;br />
* but WITHOUT ANY WARRANTY; without even the implied warranty of&lt;br />
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&lt;br />
* GNU Affero General Public License for more details.&lt;br />&lt;br />
* 
* You should have received a copy of the GNU Affero General Public License&lt;br />
* along with this program.  If not, see [&lt;http://www.gnu.org/licenses/&gt;]{@link http://www.gnu.org/licenses/}.&lt;br />&lt;br />
* 
* @author Renie Siqueira da Silva
* @module Thor
* @description This is the Thor's core, all other modules depends on this. &lt;br />
* 
* For using you just need to use THOR ou T keyword, and call a method. Like:&lt;br />&lt;br />
* if(T.placeholderSupported())&lt;br />
* &nbsp;&nbsp;&nbsp;&nbsp;alert("This Browser supports placeholder");&lt;br />&lt;br />
*
* The only exception is 'selector'. This can be called like:&lt;br />&lt;br />
* $T("#myElementId");&lt;br />
* $T(".myElementsClass");&lt;br />
* $T("#id1, #id2");&lt;br />
* &lt;br />
* @namespace
* @version 0.1.0
*/
var THOR = T = t = thor = SONOFODIN = SonOfOdin = sonofodin = (function() {

	var d = document;
	var w = window;

	var metas = d.getElementsByTagName('meta');
	var metasValues = [];
	for (i=0; i &lt; metas.length ; i++)
		metasValues[metas[i].getAttribute('name')] = metas[i].getAttribute('content'); 
	
	return {

		/**
		* @method hasClass
		* @description Returns if the specified element(el) has the specified class(name)
		* @param {!Object} el element to verify
		* @param {!String} name class name
		* @return {boolean}
		* @memberof Thor
		* @author Renie Siqueira da Silva
		* @version 0.1.0
        * @since 0.1.0
		*/
		hasClass : function(el, name) {
			return new RegExp('(\\s|^)'+name+'(\\s|$)').test(el.className);	
		},

		/**
		* @method addClass
		* @description Add a class in a specific element
		* @param {!Object} el element to verify
		* @param {!String} name class name
		* @return void
		* @memberof Thor
		* @author Renie Siqueira da Silva
		* @version 0.1.0
        * @since 0.1.0
		*/
		addClass : function(el, name){
		   	if (!ED.hasClass(el, name)){
	   			el.className += (el.className ? ' ' : '') +name;
	   		}
		},

		/**
		* @method removeClass
		* @description Remove a class from a specific element
		* @param {!Object} el the target element
		* @param {!String} name class name
		* @return void
		* @memberof Thor
		* @author Renie Siqueira da Silva
		* @version 0.1.0
        * @since 0.1.0
		*/
		removeClass : function(el, name){
			if (ED.hasClass(el, name)){
	    		el.className=el.className.replace(new RegExp('(\\s|^)'+name+'(\\s|$)'),' ').replace(/^\s+|\s+$/g, '');
	    	}
		},

		/**
		* @method addEvent
		* @description Add an event on a specific element
		* @param {!String} evnt name of the event
		* @param {!Object} elem the target element
		* @param {!Function} func callback function
		* @return void
		* @memberof Thor
		* @author Renie Siqueira da Silva
		* @version 0.1.0
        * @since 0.1.0
		*/
		addEvent : function(evnt, elem, func) {
		   if (elem.addEventListener){  // W3C DOM
		      elem.addEventListener(evnt,func,false);
		   }else if (elem.attachEvent) { // IE DOM
		      elem.attachEvent("on"+evnt, function(){ func.call(elem) });// in IE it's necessary to make 'this' acessible inside callback function
		   }else {
		      elem[evnt] = func;
		   }
		},

		/**
		* @method placeholderSupported
		* @description Verify HTML placeholder support
		* @return {boolean}
		* @memberof Thor
		* @author Renie Siqueira da Silva
		* @version 0.1.0
        * @since 0.1.0
		*/
		placeholderSupported : function(){
			return ("placeholder" in d.createElement("input"));
		},

		
		/**
		* @method browserInfo
		* @description Get inforformation about browser. Available information:&lt;br>
		* &lt;ul>
		* &lt;li>&lt;strong>browserShortName:&lt;/strong> abbreviated name, facilitating conditionals:
		* &lt;ul>
		* &lt;li>&lt;em>ie&lt;/em> - Internet Explorer&lt;/li>
		* &lt;li>&lt;em>op&lt;/em> - Opera&lt;/li>
		* &lt;li>&lt;em>gc&lt;/em> - Google Chrome&lt;/li>
		* &lt;li>&lt;em>sa&lt;/em> - Safari&lt;/li>
		* &lt;li>&lt;em>mf&lt;/em> - Mozilla Firefox&lt;/li>
		* &lt;/ul>
		* &lt;/li>
		* &lt;li>&lt;strong>browserName:&lt;/strong> full browser name&lt;/li>
		* &lt;li>&lt;strong>browserFullVersion:&lt;/strong> full information about version&lt;/li>
		* &lt;li>&lt;strong>browserMajorVersion:&lt;/strong> short version number&lt;/li>
		* &lt;/ul>
		* @param {!String} evnt name of the event
		* @param {!Object} elem the target element
		* @param {!Function} func callback function
		* @return {Array.&lt;*>}
		* @memberof Thor
		* @author Renie Siqueira da Silva
		* @version 0.1.0
        * @since 0.1.0
		*/
		browserInfo : function(){
			var n = navigator;
			var nVer = n.appVersion;
			var nAgt = n.userAgent;
			var browserName  = n.appName;
			var fullVersion  = ''+parseFloat(n.appVersion); 
			var majorVersion = parseInt(n.appVersion,10);
			var nameOffset,verOffset,ix;

			if ((verOffset=nAgt.indexOf("Opera"))!=-1) {
				browserName = "Opera";
				browserShortName = "op";
			 	fullVersion = nAgt.substring(verOffset+6);
			 	if ((verOffset=nAgt.indexOf("Version"))!=-1) 
			   		fullVersion = nAgt.substring(verOffset+8);
			}
			else if ((verOffset=nAgt.indexOf("MSIE"))!=-1) {
			 	browserName = "Microsoft Internet Explorer";
			 	browserShortName = "ie";
			 	fullVersion = nAgt.substring(verOffset+5);
			}
			else if ((verOffset=nAgt.indexOf("Chrome"))!=-1) {
			 	browserName = "Google Chrome";
			 	browserShortName = "gc";
			 	fullVersion = nAgt.substring(verOffset+7);
			}
			else if ((verOffset=nAgt.indexOf("Safari"))!=-1) {
			 	browserName = "Safari";
			 	browserShortName = "sa";
			 	fullVersion = nAgt.substring(verOffset+7);
			 	if ((verOffset=nAgt.indexOf("Version"))!=-1) 
			   		fullVersion = nAgt.substring(verOffset+8);
			}
			else if ((verOffset=nAgt.indexOf("Firefox"))!=-1) {
			 	browserName = "Mozilla Firefox";
			 	browserShortName = "mf";
			 	fullVersion = nAgt.substring(verOffset+8);
			}
			else if ( (nameOffset=nAgt.lastIndexOf(' ')+1) &lt; (verOffset=nAgt.lastIndexOf('/')) ) 
			{
			 	browserName = nAgt.substring(nameOffset,verOffset);
			 	browserShortName = browserName;
			 	fullVersion = nAgt.substring(verOffset+1);
			 	if (browserName.toLowerCase()==browserName.toUpperCase())
			  		browserName = n.appName;
			}
			
			if ((ix=fullVersion.indexOf(';'))!=-1) 
				fullVersion=fullVersion.substring(0,ix);
			if ((ix=fullVersion.indexOf(' '))!=-1) 
				fullVersion=fullVersion.substring(0,ix);

			majorVersion = parseInt(''+fullVersion,10);
			if (isNaN(majorVersion)) {
			 	fullVersion  = ''+parseFloat(n.appVersion); 
			 	majorVersion = parseInt(n.appVersion,10);
			}

			var browser = [];
			browser['browserShortName'] = browserShortName;
			browser['browserName'] = browserName;
			browser['browserFullVersion'] = fullVersion;
			browser['browserMajorVersion'] = majorVersion;
			return browser;
		},

		/**
		* @method ajax
		* @description Make a simple ajax request&lt;br />
		* Callback function must receive 2 parameters:
		* &lt;ul>
		* &lt;li>Object: all request object&lt;/li>
		* &lt;li>Object: parsed response&lt;/li>
		* &lt;/ul>
		* @param {!String} url request URL
		* @param {!Function} callback callback function
		* @param {String} method request method
		* @param {JSON} params parameters in JSON format
		* @return void
		* @memberof Thor
		* @author Renie Siqueira da Silva
		* @version 0.1.0
        * @since 0.1.0
		*/
		ajax : function(url, callback, method, params) {  
			
			var xhr;
			
			if(typeof XMLHttpRequest !== 'undefined'){ 
	        	xhr = new XMLHttpRequest();  
	        }else{  
	            var versions = ["MSXML2.XmlHttp.5.0",  
	                            "MSXML2.XmlHttp.4.0",  
	                            "MSXML2.XmlHttp.3.0",  
	                            "MSXML2.XmlHttp.2.0",  
	                            "Microsoft.XmlHttp"]  
	            for(var i = 0, len = versions.length; i &lt; len; i++) {  
	                try {  
	                    xhr = new ActiveXObject(versions[i]);  
	                    break;  
	                }  
	            	catch(e){
	            		console.error(e);
	            	}  
	            }
	        }  
	        xhr.onreadystatechange = function(){
	            
	            if(xhr.readyState &lt; 4) {  
	                return;  
	            }

	            if(xhr.status !== 200) {  
	                return;  
	            }  
	            
	            if(xhr.readyState === 4) {  
	                callback(xhr, ED.parseJSON(xhr.responseText));  
	            }  
	        }

	        if(params != null){
	        	var pairs = [];
				for (var key in params)
				  if (params.hasOwnProperty(key))
				    pairs.push(encodeURIComponent(key) + '=' + encodeURIComponent(params[key]));
				params = pairs.join('&');
	        }

	        method = method != null?method:'GET';
        	url += "?"+params;
	        xhr.open(method, url, true);  
	        xhr.send('');
		},

		/**
		* @method parseJSON
		* @description Parse a JSON string into a javascript object
		* @param {!String} JSON string
		* @return {Object}
		* @memberof Thor
		* @author Renie Siqueira da Silva
		* @version 0.1.0
        * @since 0.1.0
		*/
		parseJSON : function(string){
			return eval('(' + string + ')');
		},

		/**
		* @method getMeta
		* @description Get value for specific meta tag
		* @param {!String} Metatag name
		* @return {String}
		* @memberof Thor
		* @author Renie Siqueira da Silva
		* @version 0.1.0
        * @since 0.1.0
		*/
		getMeta : function(string){
			return metasValues[string];
		},

		
		/**
		* @method getLabelByForAttribute
		* @description Get label owned by specif input id
		* @param {!String} Metatag name
		* @return {Object}
		* @memberof Thor
		* @author Renie Siqueira da Silva
		* @version 0.1.0
        * @since 0.1.0
		*/
		getLabelByForAttribute : function(string){
			return userDataLabels[string];
		},

		/**
		* @method selector
		* @description Just an alias for lazy people
		* @param {!String} selector string
		* @return {Object|String}
		* @memberof Thor
		* @author Renie Siqueira da Silva
		* @version 0.1.0
        * @since 0.1.0
		*/
		selector : function(string){
			if(d.querySelectorAll)
				return d.querySelectorAll(string);
			else
				return "Bad Browser";
		},

		/**
		* @method seekAndDestroy
		* @description Search for elements and destroy them
		* @param {!String} selector string
		* @return {Object|String}
		* @memberof Thor
		* @author Renie Siqueira da Silva
		* @version 0.1.0
        * @since 0.1.0
		*/
		seekAndDestroy : function(string){
			if(d.querySelectorAll){
				var elements = d.querySelectorAll(string);
				for(i=0; i&lt;elements.length; i++)
					elements[i].parentNode.removeChild(elements[i]);
			}
		}
	};


})();

var THOR = THOR || {};

var $T = $THOR = THOR.selector;

/**
* @method trim
* @description Remove spaces from any string
* @return {String}
* @author Renie Siqueira da Silva
* @version 0.1.0
* @since 0.1.0
*/
String.prototype.trim = function () {
	return this.replace(/^\s+|\s+$/g,"");
}

/**
* @method ltrim
* @description Remove spaces BEFORE from any string
* @return {String}
* @author Renie Siqueira da Silva
* @version 0.1.0
* @since 0.1.0
*/
String.prototype.ltrim = function () {
	return this.replace(/^\s+/,"");
}

/**
* @method rtrim
* @description Remove spaces AFTER from any string
* @return {String}
* @author Renie Siqueira da Silva
* @version 0.1.0
* @since 0.1.0
*/
String.prototype.rtrim = function () {
	return this.replace(/\s+$/,"");
}

/**
* @method isEmpty
* @description Verify if a string is empty
* @return {Boolean}
* @author Renie Siqueira da Silva
* @version 0.1.0
* @since 0.1.0
*/
String.prototype.isEmpty = function () {
	return (this == null || this.trim().length &lt; 1  || this == undefined);
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Namespaces</h3><ul><li><a href="Thor.html">Thor</a></li><li><a href="Thor.animate.html">animate</a></li><li><a href="Thor.validate.html">validate</a></li></ul><h3>Global</h3><ul><li><a href="global.html#isEmpty">isEmpty</a></li><li><a href="global.html#ltrim">ltrim</a></li><li><a href="global.html#rtrim">rtrim</a></li><li><a href="global.html#trim">trim</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.0-dev</a> on Thu Mar 07 2013 20:29:27 GMT-0300 (BRT)
</footer>

<script> prettyPrint(); </script>
</body>
</html>
